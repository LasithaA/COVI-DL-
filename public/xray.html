<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Covid</title>

    <style>
        .image-preview {
            width: 400px;
            min-height: 150px;
            border: 2px solid #dddddd;
            margin-top: 15px;

            display: flex;
            align-items: center;
            justify-content: center;
            font-size:x-large;
            font-weight: bold;
            color: #cccccc;
        }

        .preview-image {
            display: none;
            width: 100%;
        }
    </style>

</head>
<body>
    <h1>Upload an Image of the patient's X-Ray</h1>
    <br>

    <input type="file" name="sandFile" id="sandFile" accept="image/*" >
    <!-- container for image preview -->
    <div class="image-preview" id="imgPreview">
    <!--  -->
    <img src="" alt="X-Ray Preview" class="preview-image">
    <span class="default-text">Image Preview</span>
    </div>

    <script>
        // we want to display our image
        const sandFile = document.getElementById('sandFile');
        const previewContainer = document.getElementById('imgPreview');
        const previewImage = previewContainer.querySelector('.preview-image');
        const previewDefault = previewContainer.querySelector('.default-text');

        // when file selected, get file object
        sandFile.addEventListener('change', function(){
            const file = this.files[0];

            if(file && (file.size / 1024 / 1024 )<1.5){
                // console.log('uploaded file');
                
                const reader = new FileReader();
                // hide preview text and show the selected image
                previewDefault.style.display = 'none';
                previewImage.style.display = 'block';

                reader.addEventListener('load', function(){
                    // this.result refers to the data url of image
                    console.log(this);
                    previewImage.setAttribute("src", this.result);
                });
                reader.readAsDataURL(file);
            }
            else{
                previewDefault.style.display = null;
                previewImage.style.display = null;
                previewImage.setAttribute("src", '');
            }
        });

    </script>

</body>
</html>